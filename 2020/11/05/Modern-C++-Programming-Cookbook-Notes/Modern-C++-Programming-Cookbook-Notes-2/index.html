<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>Modern C++ Programming Cookbook Notes 2: Working with Numbers and Strings | Gusabary</title><meta name="description" content="Modern C++ Programming Cookbook Notes 2: Working with Numbers and Strings"><meta name="keywords" content="C++,Modern C++ Programming Cookbook"><meta name="author" content="Gusabary"><meta name="copyright" content="Gusabary"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/avatar.jpeg"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Modern C++ Programming Cookbook Notes 2: Working with Numbers and Strings"><meta name="twitter:description" content="Modern C++ Programming Cookbook Notes 2: Working with Numbers and Strings"><meta name="twitter:image" content="http://gusabary.cn/covers/23.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Modern C++ Programming Cookbook Notes 2: Working with Numbers and Strings"><meta property="og:url" content="http://gusabary.cn/2020/11/05/Modern-C++-Programming-Cookbook-Notes/Modern-C++-Programming-Cookbook-Notes-2/"><meta property="og:site_name" content="Gusabary"><meta property="og:description" content="Modern C++ Programming Cookbook Notes 2: Working with Numbers and Strings"><meta property="og:image" content="http://gusabary.cn/covers/23.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://gusabary.cn/2020/11/05/Modern-C++-Programming-Cookbook-Notes/Modern-C++-Programming-Cookbook-Notes-2/"><link rel="prev" title="Modern C++ Programming Cookbook Notes 3: Exploring Functions" href="http://gusabary.cn/2020/11/11/Modern-C++-Programming-Cookbook-Notes/Modern-C++-Programming-Cookbook-Notes-3/"><link rel="next" title="Modern C++ Programming Cookbook Notes 1: Learning Modern Core Language Features" href="http://gusabary.cn/2020/11/04/Modern-C++-Programming-Cookbook-Notes/Modern-C++-Programming-Cookbook-Notes-1/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Gusabary</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">37</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">12</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Catalog</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Chapter-2-Working-with-Numbers-and-Strings"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">Chapter 2  Working with Numbers and Strings</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-1-Converting-between-numeric-and-string-types"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">2.1  Converting between numeric and string types</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-2-Limits-and-other-properties-of-numeric-types"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">2.2  Limits and other properties of numeric types</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-3-Generating-pseudo-random-numbers"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">2.3  Generating pseudo-random numbers</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-5-Creating-cooked-user-defined-literals"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">2.5  Creating cooked user-defined literals</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-6-Creating-raw-user-defined-literals"><span class="toc_mobile_items-number">1.5.</span> <span class="toc_mobile_items-text">2.6  Creating raw user-defined literals</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-7-Using-raw-string-literals-to-avoid-escaping-characters"><span class="toc_mobile_items-number">1.6.</span> <span class="toc_mobile_items-text">2.7  Using raw string literals to avoid escaping characters</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-8-Creating-a-library-of-string-helpers"><span class="toc_mobile_items-number">1.7.</span> <span class="toc_mobile_items-text">2.8  Creating a library of string helpers</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-9-Verifying-the-format-of-a-string-using-regular-expressions"><span class="toc_mobile_items-number">1.8.</span> <span class="toc_mobile_items-text">2.9  Verifying the format of a string using regular expressions</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-10-Parsing-the-content-of-a-string-using-regular-expressions"><span class="toc_mobile_items-number">1.9.</span> <span class="toc_mobile_items-text">2.10  Parsing the content of a string using regular expressions</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-11-Replacing-the-content-of-a-string-using-regular-expressions"><span class="toc_mobile_items-number">1.10.</span> <span class="toc_mobile_items-text">2.11  Replacing the content of a string using regular expressions</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-12-Using-string-view-instead-of-constant-string-references"><span class="toc_mobile_items-number">1.11.</span> <span class="toc_mobile_items-text">2.12  Using string_view instead of constant string references</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Link"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">Link</span></a></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Chapter-2-Working-with-Numbers-and-Strings"><span class="toc-number">1.</span> <span class="toc-text">Chapter 2  Working with Numbers and Strings</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-Converting-between-numeric-and-string-types"><span class="toc-number">1.1.</span> <span class="toc-text">2.1  Converting between numeric and string types</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-Limits-and-other-properties-of-numeric-types"><span class="toc-number">1.2.</span> <span class="toc-text">2.2  Limits and other properties of numeric types</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-Generating-pseudo-random-numbers"><span class="toc-number">1.3.</span> <span class="toc-text">2.3  Generating pseudo-random numbers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-Creating-cooked-user-defined-literals"><span class="toc-number">1.4.</span> <span class="toc-text">2.5  Creating cooked user-defined literals</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-Creating-raw-user-defined-literals"><span class="toc-number">1.5.</span> <span class="toc-text">2.6  Creating raw user-defined literals</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-Using-raw-string-literals-to-avoid-escaping-characters"><span class="toc-number">1.6.</span> <span class="toc-text">2.7  Using raw string literals to avoid escaping characters</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-Creating-a-library-of-string-helpers"><span class="toc-number">1.7.</span> <span class="toc-text">2.8  Creating a library of string helpers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-9-Verifying-the-format-of-a-string-using-regular-expressions"><span class="toc-number">1.8.</span> <span class="toc-text">2.9  Verifying the format of a string using regular expressions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-10-Parsing-the-content-of-a-string-using-regular-expressions"><span class="toc-number">1.9.</span> <span class="toc-text">2.10  Parsing the content of a string using regular expressions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-11-Replacing-the-content-of-a-string-using-regular-expressions"><span class="toc-number">1.10.</span> <span class="toc-text">2.11  Replacing the content of a string using regular expressions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-12-Using-string-view-instead-of-constant-string-references"><span class="toc-number">1.11.</span> <span class="toc-text">2.12  Using string_view instead of constant string references</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Link"><span class="toc-number">2.</span> <span class="toc-text">Link</span></a></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(/covers/23.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">Modern C++ Programming Cookbook Notes 2: Working with Numbers and Strings</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> Created 2020-11-05<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> Updated 2020-11-05</time><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>Post View:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h2 id="Chapter-2-Working-with-Numbers-and-Strings"><a href="#Chapter-2-Working-with-Numbers-and-Strings" class="headerlink" title="Chapter 2  Working with Numbers and Strings"></a>Chapter 2  Working with Numbers and Strings</h2><h3 id="2-1-Converting-between-numeric-and-string-types"><a href="#2-1-Converting-between-numeric-and-string-types" class="headerlink" title="2.1  Converting between numeric and string types"></a>2.1  Converting between numeric and string types</h3><ul>
<li><p>Use <code>std::to_string()</code> to convert a numeric (including integral and floating point type) to string.</p>
</li>
<li><p>Use <code>std::stoi()</code> to convert a string to an integer type. Other than the string, it accepts another two parameters, which are the address of variable to store the number of characters processed and the number indicating the base (default is 10).</p>
<p>Note that the <code>0</code> (and <code>0x</code>) prefix in the string is only valid when the base is 0 or 8 (0 or 16).</p>
</li>
<li><p>Use <code>std::stod()</code> to convert a string to a double type. It doesn’t accept the number indicating the base explicitly while the string still has several forms like decimal floating point (containing <code>e</code>), binary floating point (containing <code>0x</code> and <code>p</code>), <code>inf</code> and <code>nan</code>.</p>
</li>
<li><p>The functions converting string to numeric types can throw two exceptions potentially, which are <code>std::invalid_argument</code> and <code>std::out_of_range</code>.</p>
</li>
</ul>
<h3 id="2-2-Limits-and-other-properties-of-numeric-types"><a href="#2-2-Limits-and-other-properties-of-numeric-types" class="headerlink" title="2.2  Limits and other properties of numeric types"></a>2.2  Limits and other properties of numeric types</h3><ul>
<li><code>std::numeric_limits</code>, which is a class template, provides some information about numeric types, among which the most common used is <code>::min()</code> and <code>::max()</code>.</li>
<li>Since C++11, all static members of <code>std::numeric_limits</code> are <code>constexpr</code>, which can be used everywhere including as constant expression, so the C-style macro of numeric properties can be deprecated completely.</li>
<li><em><a href="https://en.cppreference.com/w/cpp/types/numeric_limits" target="_blank" rel="noopener">reference</a></em></li>
</ul>
<h3 id="2-3-Generating-pseudo-random-numbers"><a href="#2-3-Generating-pseudo-random-numbers" class="headerlink" title="2.3  Generating pseudo-random numbers"></a>2.3  Generating pseudo-random numbers</h3><ul>
<li><p>When talking about random numbers in modern C++, we need to be clear about two concepts: engines and distributions:</p>
<ul>
<li><strong>Engines</strong> are used to produce random numbers with a uniform distribution.</li>
<li><strong>Distributions</strong> are used to convert the output of engine to a specified distribution.</li>
</ul>
</li>
<li><p>So things are clear: choose an engine to produce a random number and use a distribution to convert it to, say, a range we want:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::random_device rd&#123;&#125;;</span><br><span class="line"><span class="keyword">auto</span> mtgen = <span class="built_in">std</span>::mt19937&#123; rd() &#125;;</span><br><span class="line"><span class="keyword">auto</span> ud = <span class="built_in">std</span>::uniform_int_distribution&lt;&gt;&#123; <span class="number">1</span>, <span class="number">6</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; ++i) &#123;</span><br><span class="line">    <span class="keyword">auto</span> number = ud(mtgen);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>First, we use <code>std::random_device</code> engine to produce a random number as seed. Then use it to seed another engine <code>std::mt19937</code>, which will be used by distributions later. And then define a uniform distribution to limit the range to between 1 and 6. Finally invoke the distribution with the chosen engine to produce random numbers in the range we want.</p>
</li>
</ul>
<h3 id="2-5-Creating-cooked-user-defined-literals"><a href="#2-5-Creating-cooked-user-defined-literals" class="headerlink" title="2.5  Creating cooked user-defined literals"></a>2.5  Creating cooked user-defined literals</h3><ul>
<li><p>Since C++11, we can create cooked user-defined literals with <code>operator&quot;&quot;</code>:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constexpr</span> <span class="keyword">size_t</span> <span class="keyword">operator</span><span class="string">""</span> _KB(<span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="built_in">size</span>) &#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">static_cast</span>&lt;<span class="keyword">size_t</span>&gt;(<span class="built_in">size</span> * <span class="number">1024</span>); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> <span class="built_in">size</span>&#123; <span class="number">4</span>_KB &#125;;  <span class="comment">// size_t size = 4096;</span></span><br><span class="line"><span class="keyword">auto</span> <span class="built_in">buffer</span> = <span class="built_in">std</span>::<span class="built_in">array</span>&lt;<span class="keyword">byte</span>, <span class="number">1</span>_KB&gt;&#123;&#125;;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>There are some points to mention:</p>
<ul>
<li>For integral type, the argument needs to be <code>unsigned long long</code> and for floating-point type, it needs to be <code>long double</code>, i.e. literals should handle the largest possible values.</li>
<li>It’s recommended to define the literal operator in a separate namespace and then <code>using</code> it to avoid name collision.</li>
<li>It’s also recommended to prefix the user-defined suffix with an underscore (<code>_</code>) to avoid conflict with standard literal suffix introduced in C++14 (such as <code>s</code>, <code>min</code> and so on).</li>
</ul>
</li>
</ul>
<h3 id="2-6-Creating-raw-user-defined-literals"><a href="#2-6-Creating-raw-user-defined-literals" class="headerlink" title="2.6  Creating raw user-defined literals"></a>2.6  Creating raw user-defined literals</h3><ul>
<li><p>Raw literal operators, as <strong>fallbacks</strong> of cooked literal operators, accept a string of char as parameter:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">T <span class="keyword">operator</span> <span class="string">""</span> _suffix(<span class="keyword">const</span> <span class="keyword">char</span>*); </span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">char</span>...&gt; T <span class="keyword">operator</span> <span class="string">""</span> _suffix();</span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<h3 id="2-7-Using-raw-string-literals-to-avoid-escaping-characters"><a href="#2-7-Using-raw-string-literals-to-avoid-escaping-characters" class="headerlink" title="2.7  Using raw string literals to avoid escaping characters"></a>2.7  Using raw string literals to avoid escaping characters</h3><ul>
<li><p>Raw string literals has two forms:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">R"( literal )"</span></span><br><span class="line"><span class="string">R"delimiter( literal )delimiter"</span></span><br></pre></td></tr></table></figure></div>

<p>The principle is what you see is what you get, e.g.:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> sqlselect &#123; </span><br><span class="line">          R<span class="string">"(SELECT * </span></span><br><span class="line"><span class="string">          FROM Books </span></span><br><span class="line"><span class="string">          WHERE Publisher='Paktpub' </span></span><br><span class="line"><span class="string">          ORDER BY PubDate DESC)"</span>s</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>

<p>even the <code>\n</code> will be included in the string.</p>
</li>
</ul>
<h3 id="2-8-Creating-a-library-of-string-helpers"><a href="#2-8-Creating-a-library-of-string-helpers" class="headerlink" title="2.8  Creating a library of string helpers"></a>2.8  Creating a library of string helpers</h3><ul>
<li><p>One thing worth noting is that return value of <code>remove()</code> algorithm is the first iterator after the new range, so an extra <code>erase()</code> is needed:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="built_in">string</span> str = <span class="string">"Text with some   spaces"</span>;</span><br><span class="line">str.erase(<span class="built_in">std</span>::<span class="built_in">remove</span>(str.<span class="built_in">begin</span>(), str.<span class="built_in">end</span>(), <span class="string">' '</span>), str.<span class="built_in">end</span>());</span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<h3 id="2-9-Verifying-the-format-of-a-string-using-regular-expressions"><a href="#2-9-Verifying-the-format-of-a-string-using-regular-expressions" class="headerlink" title="2.9  Verifying the format of a string using regular expressions"></a>2.9  Verifying the format of a string using regular expressions</h3><ul>
<li><p>Use a regular expression to match against a string:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> pattern &#123;<span class="string">R"(^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]&#123;2,&#125;$)"</span>s&#125;;</span><br><span class="line"><span class="keyword">auto</span> rx = <span class="built_in">std</span>::regex&#123;pattern&#125;;</span><br><span class="line"><span class="keyword">auto</span> valid = <span class="built_in">std</span>::regex_match(<span class="string">"marius@domain.com"</span>s, rx);</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>When constructing the <code>std::regex</code>, we can specify some extra options. e.g. to ignore letter case:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> rx = <span class="built_in">std</span>::regex&#123;pattern, <span class="built_in">std</span>::regex_constants::icase&#125;;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>Actually <code>std::regex_match()</code> has several overloads, among which there is one to return the matched subexpressions:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> rx = <span class="built_in">std</span>::regex&#123;<span class="string">R"(^([A-Z0-9._%+-]+)@([A-Z0-9.-]+)\.([A-Z]&#123;2,&#125;)$)"</span>s&#125;;</span><br><span class="line"><span class="keyword">auto</span> result = <span class="built_in">std</span>::smatch&#123;&#125;; </span><br><span class="line"><span class="keyword">auto</span> success = <span class="built_in">std</span>::regex_match(email, result, rx);</span><br></pre></td></tr></table></figure></div>

<p>Note that three pairs of parentheses in the regular expressions, which indicates the subexpression needed to match. After calling <code>std::regex_match()</code>, the matching results can be queried from the <code>std::smatch</code>:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; result[<span class="number">0</span>].str() &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">// the entire expression</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; result[<span class="number">1</span>].str() &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">// subexpression 1</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; result[<span class="number">2</span>].str() &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">// subexpression 2 </span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; result[<span class="number">3</span>].str() &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">// subexpression 3</span></span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<h3 id="2-10-Parsing-the-content-of-a-string-using-regular-expressions"><a href="#2-10-Parsing-the-content-of-a-string-using-regular-expressions" class="headerlink" title="2.10  Parsing the content of a string using regular expressions"></a>2.10  Parsing the content of a string using regular expressions</h3><ul>
<li><p>Just like <code>std::regex_match()</code>, we can use <code>std::regex_search()</code> to parse the content of a string:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> match = <span class="built_in">std</span>::smatch&#123;&#125;; </span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">std</span>::regex_search(<span class="built_in">text</span>, match, rx)) &#123; </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; match[<span class="number">1</span>] &lt;&lt; <span class="string">'='</span> &lt;&lt; match[<span class="number">2</span>] &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>However, <code>std::regex_search()</code> just performs a one-time search, i.e. it won’t iterate over the string to find all substrings that match. To solve this, we could use <code>std::sregex_iterator</code> or <code>std::sregex_token_iterator</code>:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> <span class="built_in">end</span> = <span class="built_in">std</span>::sregex_iterator&#123;&#125;; </span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> it = <span class="built_in">std</span>::sregex_iterator&#123; <span class="built_in">std</span>::<span class="built_in">begin</span>(<span class="built_in">text</span>), <span class="built_in">std</span>::<span class="built_in">end</span>(<span class="built_in">text</span>), rx &#125;; </span><br><span class="line">    it != <span class="built_in">end</span>; ++it) &#123; </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; (*it)[<span class="number">1</span>] &lt;&lt; <span class="string">'='</span> &lt;&lt; (*it)[<span class="number">2</span>] &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<h3 id="2-11-Replacing-the-content-of-a-string-using-regular-expressions"><a href="#2-11-Replacing-the-content-of-a-string-using-regular-expressions" class="headerlink" title="2.11  Replacing the content of a string using regular expressions"></a>2.11  Replacing the content of a string using regular expressions</h3><ul>
<li><p>Use <code>std::regex_replace()</code> to replace the content of a string. The parameters of it are as follows:</p>
<ul>
<li>the input string on which the replacement will be performed,</li>
<li>a <code>std::basic_regex</code> that is used to match against,</li>
<li>the string format that is used to replace,</li>
<li>and some flags.</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> <span class="built_in">text</span>&#123; <span class="string">"bancila, marius"</span>s &#125;; </span><br><span class="line"><span class="keyword">auto</span> rx = <span class="built_in">std</span>::regex&#123; <span class="string">R"((\w+),\s*(\w+))"</span>s &#125;; </span><br><span class="line"><span class="keyword">auto</span> newtext = <span class="built_in">std</span>::regex_replace(<span class="built_in">text</span>, rx, <span class="string">"$2 $1"</span>s);</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>The last two parameters are worth mentioning. The string format can use a match identifier to indicate a substring. e.g. <code>$1</code> means the first subexpression matched, <code>$&amp;</code> means the entire match, <code>$&#39;</code> means the substring after the last match and so on.</p>
<p>And as the last parameter, the flags can be something like <code>std::regex_constants::format_first_only</code>, which means <em>just replace once</em>.</p>
</li>
</ul>
<h3 id="2-12-Using-string-view-instead-of-constant-string-references"><a href="#2-12-Using-string-view-instead-of-constant-string-references" class="headerlink" title="2.12  Using string_view instead of constant string references"></a>2.12  Using string_view instead of constant string references</h3><ul>
<li><p>C++17 introduces <code>std::string_view</code>, which is a <strong>non-owning</strong> (doesn’t manage lifetime of the data) <strong>constant</strong> (cannot modify) reference to a string, to solve the problem of performance cost due to temporary string objects.</p>
<p><code>std::string_view</code> provides interfaces which are almost the same with <code>std::string</code> so typically we can almost always replace <code>const std::string &amp;</code> with <code>std::string_view</code> unless a <code>std::string</code> is indeed needed.</p>
</li>
<li><p>Essentially <code>std::string_view</code> just holds a <strong>pointer</strong> to the start position of the character sequence and a <strong>length</strong> of it. </p>
<p>It provides <code>remove_prefix()</code> and <code>remove_suffix()</code> methods to resize the range.</p>
</li>
<li><p><code>std::string_view</code> can be constructed from a <code>std::string</code> and vice versa.</p>
</li>
</ul>
<h2 id="Link"><a href="#Link" class="headerlink" title="Link"></a>Link</h2><ul>
<li><a href="https://subscription.packtpub.com/book/programming/9781786465184/2" target="_blank" rel="noopener">https://subscription.packtpub.com/book/programming/9781786465184/2</a></li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Gusabary</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://gusabary.cn/2020/11/05/Modern-C++-Programming-Cookbook-Notes/Modern-C++-Programming-Cookbook-Notes-2/">http://gusabary.cn/2020/11/05/Modern-C++-Programming-Cookbook-Notes/Modern-C++-Programming-Cookbook-Notes-2/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/C/">C++    </a><a class="post-meta__tags" href="/tags/Modern-C-Programming-Cookbook/">Modern C++ Programming Cookbook    </a></div><div class="post_share"><div class="social-share" data-image="/covers/23.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/11/11/Modern-C++-Programming-Cookbook-Notes/Modern-C++-Programming-Cookbook-Notes-3/"><img class="prev_cover lazyload" data-src="/covers/14.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Previous Post</div><div class="prev_info"><span>Modern C++ Programming Cookbook Notes 3: Exploring Functions</span></div></a></div><div class="next-post pull_right"><a href="/2020/11/04/Modern-C++-Programming-Cookbook-Notes/Modern-C++-Programming-Cookbook-Notes-1/"><img class="next_cover lazyload" data-src="/covers/3.jpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>Modern C++ Programming Cookbook Notes 1: Learning Modern Core Language Features</span></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> Comment</span></div><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'a87be25f987639da0355',
  clientSecret: '2d8818b819ff046e4945c16e4e5830337af60ff6',
  repo: 'gusabary.github.io',
  owner: 'Gusabary',
  admin: 'Gusabary',
  id: md5(decodeURI(location.pathname)),
  language: 'en , zh-CN , zh-TW',
  updateCountCallback: commentCount
})
gitalk.render('gitalk-container')

function commentCount(n){
  document.getElementsByClassName('gitalk-comment-count')[0].innerHTML= n
}</script></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By Gusabary</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">Nature's blessings upon you!</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="Scroll to comment"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>