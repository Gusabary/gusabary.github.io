<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>Modern C++ Programming Cookbook Notes 5: Standard Library Containers, Algorithms and Iterators | Gusabary</title><meta name="description" content="Modern C++ Programming Cookbook Notes 5: Standard Library Containers, Algorithms and Iterators"><meta name="keywords" content="C++,Modern C++ Programming Cookbook"><meta name="author" content="Gusabary"><meta name="copyright" content="Gusabary"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/avatar.jpeg"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Modern C++ Programming Cookbook Notes 5: Standard Library Containers, Algorithms and Iterators"><meta name="twitter:description" content="Modern C++ Programming Cookbook Notes 5: Standard Library Containers, Algorithms and Iterators"><meta name="twitter:image" content="http://gusabary.cn/covers/42.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Modern C++ Programming Cookbook Notes 5: Standard Library Containers, Algorithms and Iterators"><meta property="og:url" content="http://gusabary.cn/2020/11/19/Modern-C++-Programming-Cookbook-Notes/Modern-C++-Programming-Cookbook-Notes-5/"><meta property="og:site_name" content="Gusabary"><meta property="og:description" content="Modern C++ Programming Cookbook Notes 5: Standard Library Containers, Algorithms and Iterators"><meta property="og:image" content="http://gusabary.cn/covers/42.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://gusabary.cn/2020/11/19/Modern-C++-Programming-Cookbook-Notes/Modern-C++-Programming-Cookbook-Notes-5/"><link rel="prev" title="Modern C++ Programming Cookbook Notes 6: General Purpose Utilities" href="http://gusabary.cn/2020/11/20/Modern-C++-Programming-Cookbook-Notes/Modern-C++-Programming-Cookbook-Notes-6/"><link rel="next" title="Modern C++ Programming Cookbook Notes 4: Preprocessor and Compilation" href="http://gusabary.cn/2020/11/17/Modern-C++-Programming-Cookbook-Notes/Modern-C++-Programming-Cookbook-Notes-4/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Gusabary</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">39</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">12</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Catalog</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Chapter-5-Standard-Library-Containers-Algorithms-and-Iterators"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">Chapter 5  Standard Library Containers, Algorithms and Iterators</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-1-Using-vector-as-a-default-container"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">5.1  Using vector as a default container</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-2-Using-bitset-for-fixed-size-sequences-of-bits"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">5.2  Using bitset for fixed-size sequences of bits</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-3-Using-vector-lt-bool-gt-for-variable-size-sequences-of-bits"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">5.3  Using vector&lt;bool&gt; for variable-size sequences of bits</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-4-Finding-elements-in-a-range"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">5.4  Finding elements in a range</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-5-Sorting-a-range"><span class="toc_mobile_items-number">1.5.</span> <span class="toc_mobile_items-text">5.5  Sorting a range</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-6-Initializing-a-range"><span class="toc_mobile_items-number">1.6.</span> <span class="toc_mobile_items-text">5.6  Initializing a range</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-7-Using-set-operations-on-a-range"><span class="toc_mobile_items-number">1.7.</span> <span class="toc_mobile_items-text">5.7  Using set operations on a range</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-8-Using-iterators-to-insert-new-elements-in-a-container"><span class="toc_mobile_items-number">1.8.</span> <span class="toc_mobile_items-text">5.8  Using iterators to insert new elements in a container</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-9-Writing-your-own-random-access-iterator"><span class="toc_mobile_items-number">1.9.</span> <span class="toc_mobile_items-text">5.9  Writing your own random access iterator</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-10-Container-access-with-non-member-fucntions"><span class="toc_mobile_items-number">1.10.</span> <span class="toc_mobile_items-text">5.10  Container access with non-member fucntions</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Link"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">Link</span></a></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Chapter-5-Standard-Library-Containers-Algorithms-and-Iterators"><span class="toc-number">1.</span> <span class="toc-text">Chapter 5  Standard Library Containers, Algorithms and Iterators</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-Using-vector-as-a-default-container"><span class="toc-number">1.1.</span> <span class="toc-text">5.1  Using vector as a default container</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-Using-bitset-for-fixed-size-sequences-of-bits"><span class="toc-number">1.2.</span> <span class="toc-text">5.2  Using bitset for fixed-size sequences of bits</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-Using-vector-lt-bool-gt-for-variable-size-sequences-of-bits"><span class="toc-number">1.3.</span> <span class="toc-text">5.3  Using vector&lt;bool&gt; for variable-size sequences of bits</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-Finding-elements-in-a-range"><span class="toc-number">1.4.</span> <span class="toc-text">5.4  Finding elements in a range</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-Sorting-a-range"><span class="toc-number">1.5.</span> <span class="toc-text">5.5  Sorting a range</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-Initializing-a-range"><span class="toc-number">1.6.</span> <span class="toc-text">5.6  Initializing a range</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-Using-set-operations-on-a-range"><span class="toc-number">1.7.</span> <span class="toc-text">5.7  Using set operations on a range</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-Using-iterators-to-insert-new-elements-in-a-container"><span class="toc-number">1.8.</span> <span class="toc-text">5.8  Using iterators to insert new elements in a container</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-9-Writing-your-own-random-access-iterator"><span class="toc-number">1.9.</span> <span class="toc-text">5.9  Writing your own random access iterator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-10-Container-access-with-non-member-fucntions"><span class="toc-number">1.10.</span> <span class="toc-text">5.10  Container access with non-member fucntions</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Link"><span class="toc-number">2.</span> <span class="toc-text">Link</span></a></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(/covers/42.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">Modern C++ Programming Cookbook Notes 5: Standard Library Containers, Algorithms and Iterators</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> Created 2020-11-19<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> Updated 2020-11-19</time><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>Post View:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h2 id="Chapter-5-Standard-Library-Containers-Algorithms-and-Iterators"><a href="#Chapter-5-Standard-Library-Containers-Algorithms-and-Iterators" class="headerlink" title="Chapter 5  Standard Library Containers, Algorithms and Iterators"></a>Chapter 5  Standard Library Containers, Algorithms and Iterators</h2><h3 id="5-1-Using-vector-as-a-default-container"><a href="#5-1-Using-vector-as-a-default-container" class="headerlink" title="5.1  Using vector as a default container"></a>5.1  Using vector as a default container</h3><ul>
<li>Use <code>std::vector</code> as the default container unless there is a good reason to use another one. That’s because <code>std::vector</code> has many benefits, among which it’s compatible with C-like arrays (just invoking <code>data()</code> method to get the address of the first element)</li>
<li>One thing worth noting is that the capacity expansion sounds time-consuming, but actually each element can be regarded as moved just once due to the exponential expansion policy. Clearly speaking, you have four elements, here comes the fifth one and it needs to find a larger space, which can contain eight elements. So we can say space for another four elements is acquired after a move of four elements, which is a one-on-one relationship.</li>
</ul>
<h3 id="5-2-Using-bitset-for-fixed-size-sequences-of-bits"><a href="#5-2-Using-bitset-for-fixed-size-sequences-of-bits" class="headerlink" title="5.2  Using bitset for fixed-size sequences of bits"></a>5.2  Using bitset for fixed-size sequences of bits</h3><ul>
<li><p><code>std::bitset</code> can be used for a fixed-size sequence of bits, whose template parameter is the size.</p>
</li>
<li><p><code>std::bitset</code> can be converted from integral type and string with its constructors and converted to them with its methods:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="built_in">bitset</span>&lt;8&gt; b2&#123; <span class="number">10</span> &#125;;  <span class="comment">// [0,0,0,0,1,0,1,0]</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">bitset</span>&lt;8&gt; b3&#123; <span class="string">"1010"</span>s &#125;;  <span class="comment">// [0,0,0,0,1,0,1,0]</span></span><br><span class="line"></span><br><span class="line">b2.to_ulong();  <span class="comment">// 10</span></span><br><span class="line">b3.to_string();  <span class="comment">// "00001010"</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>Bits in <code>std::bitset</code> can be tested by some methods like <code>any()</code>, <code>all()</code>, <code>none()</code>, <code>test()</code> and so on, and can be modified by something like <code>flip()</code>, <code>set()</code> and <code>reset()</code>. Also, <code>std::bitset</code> supports operation like <code>|</code>, <code>&amp;</code> and <code>^</code>.</p>
</li>
</ul>
<h3 id="5-3-Using-vector-lt-bool-gt-for-variable-size-sequences-of-bits"><a href="#5-3-Using-vector-lt-bool-gt-for-variable-size-sequences-of-bits" class="headerlink" title="5.3  Using vector&lt;bool&gt; for variable-size sequences of bits"></a>5.3  Using <code>vector&lt;bool&gt;</code> for variable-size sequences of bits</h3><ul>
<li><p><code>std::vector&lt;bool&gt;</code> is essentially a specialization of <code>std::vector&lt;T&gt;</code> with speed and space optimization: <strong>it store a single bit instead of a bool value (1 byte) for each element</strong>.</p>
<p>However, it also brings some drawbacks like the element cannot be referenced, and its iterator cannot be used as a forward iterator:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; bv;</span><br><span class="line">bv.resize(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">auto</span>&amp; <span class="built_in">bit</span> = bv[<span class="number">0</span>];      <span class="comment">// error</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>If you don’t want such optimization, <code>std::deque&lt;bool&gt;</code> might be a good choice.</p>
</li>
</ul>
<h3 id="5-4-Finding-elements-in-a-range"><a href="#5-4-Finding-elements-in-a-range" class="headerlink" title="5.4  Finding elements in a range"></a>5.4  Finding elements in a range</h3><ul>
<li><a href="http://gusabary.cn/2020/03/14/C++STL%E4%B8%AD%E7%9A%84Algorithm/">STL Algorithms</a> provides many generic functions to find elements in a range, most of which has return value of the end iterator to indicate the not found result.</li>
</ul>
<h3 id="5-5-Sorting-a-range"><a href="#5-5-Sorting-a-range" class="headerlink" title="5.5  Sorting a range"></a>5.5  Sorting a range</h3><ul>
<li><p>When using sorting function provided by STL Algorithms, pass in a functor to customize your own compare function:</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v&#123;<span class="number">3</span>, <span class="number">13</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>&#125;;</span><br><span class="line"><span class="built_in">std</span>::sort(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>());  <span class="comment">// v = &#123;1, 1, 2, 3, 5, 8, 13&#125;</span></span><br><span class="line"><span class="built_in">std</span>::sort(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="built_in">std</span>::greater&lt;&gt;());  <span class="comment">// v = &#123;13, 8, 5, 3, 2, 1 ,1&#125;</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p><code>std::is_sort()</code> can be used to check whether a range of elements is already sorted.</p>
</li>
<li><p>Some containers like <code>std::list</code> provide <code>sort()</code> as their methods, which should be preferred to the <code>std::sort()</code>.</p>
</li>
</ul>
<h3 id="5-6-Initializing-a-range"><a href="#5-6-Initializing-a-range" class="headerlink" title="5.6  Initializing a range"></a>5.6  Initializing a range</h3><ul>
<li><p>STL Algorithms also provide a series of functions to fill (initialize) elements in a range. Most basically, we can use <code>std::fill</code> to fill a range with a given value and <code>std::generate</code> to fill a range with the return value of a given callable. (The callable accepts no parameter. If you want to use the original value in the container, resort to <code>std::transform</code>) </p>
<p>And also, we can use <code>std::iota</code> to fill a range with sequentially increasing values (actually it’s the <code>operator++</code> that gets invoked).</p>
</li>
</ul>
<h3 id="5-7-Using-set-operations-on-a-range"><a href="#5-7-Using-set-operations-on-a-range" class="headerlink" title="5.7  Using set operations on a range"></a>5.7  Using set operations on a range</h3><ul>
<li>Note that set operations like <code>std::set_union</code>, <code>std::set_intersection</code>, <code>std::set_difference</code> and so on should be used on sorted containers (not necessarily a set, vector is ok as long as it’s sorted)</li>
</ul>
<h3 id="5-8-Using-iterators-to-insert-new-elements-in-a-container"><a href="#5-8-Using-iterators-to-insert-new-elements-in-a-container" class="headerlink" title="5.8  Using iterators to insert new elements in a container"></a>5.8  Using iterators to insert new elements in a container</h3><ul>
<li><p>When using some STL Algorithms like <code>std::fill_n</code> to insert a range of elements into a container, we couldn’t use some <em>common</em> iterators. For example, we couldn’t use the iterator returned by <code>std::begin()</code>, because the following fill operation will overwrite the existing elements rather than insert. And we also couldn’t use the iterator returned by <code>std::end()</code>, because the compiler will complain something about out of range error.</p>
<p>Yep, we can resort to the <em>insert iterators</em>, i.e. iterators returned by <code>std::back_inserter()</code>, <code>std::front_inserter()</code> and <code>std::inserter()</code>.</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v&#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line"><span class="built_in">std</span>::fill_n(<span class="built_in">std</span>::inserter(v, <span class="built_in">std</span>::next(v.<span class="built_in">begin</span>(), <span class="number">2</span>)), <span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// 1, 2, 0, 0, 0, 3, 4, 5</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>They are all <strong>output iterators</strong> and increasing or dereferencing these iterators actually do nothing. However, upon assignment, they will invoke some methods of the container separately:</p>
<ul>
<li><code>push_back()</code> for <code>std::back_insert_iterator</code>,</li>
<li><code>push_front()</code> for <code>std::front_insert_iterator</code>,</li>
<li><code>insert()</code> for <code>std::insert_iterator</code>.</li>
</ul>
<p>So this places some limits to containers that insert iterators can work on. e.g. <code>std::back_insert_iterator</code> doesn’t apply to <code>std::forward_list</code> because it doesn’t have <code>push_bakc()</code> method. For the same reason. <code>std::front_insert_iterator</code> doesn’t apply to <code>std::vector</code>.</p>
</li>
<li><p>Note that these insert iterators are preferred when inserting a <strong>range</strong> of elements instead of a single one. For the latter situation, <code>push_back()</code>, <code>push_front()</code> and <code>insert()</code> methods are certainly the first choice.</p>
</li>
</ul>
<h3 id="5-9-Writing-your-own-random-access-iterator"><a href="#5-9-Writing-your-own-random-access-iterator" class="headerlink" title="5.9  Writing your own random access iterator"></a>5.9  Writing your own random access iterator</h3><ul>
<li>From input iterators to random-access iterators, more functionalities are supported:<ul>
<li>Common requirements of all iterators: copy-constructible, copy-assignable, destructible and can be incremented.</li>
<li>Input iterators: support equality comparison and can be dereferenced as rvalue.</li>
<li>Output iterators: can be dereferenced as lvalue.</li>
<li>Forward iterators: can be default constructed and support multi-pass iteration.</li>
<li>Bidirectional iterators: can be decremented.</li>
<li>Random-access iterator: support arithmetic operation, offset dereference operator (<code>[]</code>) and inequality comparison (<code>&lt;</code>, <code>&gt;=</code> and so on).</li>
</ul>
</li>
<li>For more details, refer to <em><a href="http://www.cplusplus.com/reference/iterator/" target="_blank" rel="noopener">the iterator doc</a></em>.</li>
</ul>
<h3 id="5-10-Container-access-with-non-member-fucntions"><a href="#5-10-Container-access-with-non-member-fucntions" class="headerlink" title="5.10  Container access with non-member fucntions"></a>5.10  Container access with non-member fucntions</h3><ul>
<li><p>Non-member functions about the STL container access don’t only include <code>std::begin()</code> and <code>std::end()</code>, but also <code>std::data()</code>, <code>std::size()</code> and <code>std::empty()</code> as of C++17.</p>
</li>
<li><p>The implement logic is simple: if the container has methods of <code>begin()</code> and <code>end()</code>, just invoke them. If it’s not the case, implement a specialization for it (such as the C-style array)</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">c++</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">C</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">constexpr</span> <span class="title">auto</span> <span class="title">inline</span> <span class="title">begin</span>(<span class="title">C</span>&amp; <span class="title">c</span>) -&gt; <span class="title">decltype</span>(<span class="title">c</span>.<span class="title">begin</span>()) &#123;</span></span><br><span class="line">    <span class="keyword">return</span> c.<span class="built_in">begin</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>, <span class="title">std</span>:</span>:<span class="keyword">size_t</span> N&gt;</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> T* <span class="keyword">inline</span> <span class="title">begin</span><span class="params">(T (&amp;<span class="built_in">array</span>)[N])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">array</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<h2 id="Link"><a href="#Link" class="headerlink" title="Link"></a>Link</h2><ul>
<li><a href="https://subscription.packtpub.com/book/programming/9781786465184/5" target="_blank" rel="noopener">https://subscription.packtpub.com/book/programming/9781786465184/5</a></li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Gusabary</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://gusabary.cn/2020/11/19/Modern-C++-Programming-Cookbook-Notes/Modern-C++-Programming-Cookbook-Notes-5/">http://gusabary.cn/2020/11/19/Modern-C++-Programming-Cookbook-Notes/Modern-C++-Programming-Cookbook-Notes-5/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/C/">C++    </a><a class="post-meta__tags" href="/tags/Modern-C-Programming-Cookbook/">Modern C++ Programming Cookbook    </a></div><div class="post_share"><div class="social-share" data-image="/covers/42.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/11/20/Modern-C++-Programming-Cookbook-Notes/Modern-C++-Programming-Cookbook-Notes-6/"><img class="prev_cover lazyload" data-src="/covers/41.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Previous Post</div><div class="prev_info"><span>Modern C++ Programming Cookbook Notes 6: General Purpose Utilities</span></div></a></div><div class="next-post pull_right"><a href="/2020/11/17/Modern-C++-Programming-Cookbook-Notes/Modern-C++-Programming-Cookbook-Notes-4/"><img class="next_cover lazyload" data-src="/covers/39.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>Modern C++ Programming Cookbook Notes 4: Preprocessor and Compilation</span></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> Comment</span></div><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'a87be25f987639da0355',
  clientSecret: '2d8818b819ff046e4945c16e4e5830337af60ff6',
  repo: 'gusabary.github.io',
  owner: 'Gusabary',
  admin: 'Gusabary',
  id: md5(decodeURI(location.pathname)),
  language: 'en , zh-CN , zh-TW',
  updateCountCallback: commentCount
})
gitalk.render('gitalk-container')

function commentCount(n){
  document.getElementsByClassName('gitalk-comment-count')[0].innerHTML= n
}</script></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By Gusabary</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">Nature's blessings upon you!</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="Scroll to comment"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>